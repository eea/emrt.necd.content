<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="esdrt.content">

  <tal:block metal:fill-slot="head_slot">
    <link rel="stylesheet" type="text/css" href="compare.css"
          tal:attributes="href string:${portal_url}/compare.css"/>
  </tal:block>

  <tal:block metal:fill-slot="javascript_head_slot">
    <script type="text/javascript">
    (function($) {
      update_display = function() {
          var style = $(this).attr('value');
          if (! this.checked) {
              return;
          }

          $(".fieldDiff").hide();

          if (style=="visual") {
              $(".inline-diff").show();
          }
          else {
              $(".code-diff").show();
          }
      }

      $(document).ready(function() {
          $(".jsOnly").show();

          $("#versionSelector select").change(function() { this.form.submit(); });
          $("#diffTypeSelector input").click(update_display);
          $("#diffTypeSelector input").each(update_display);
      });
    })(jQuery);

</script>
  </tal:block>


<body>

<metal:main fill-slot="content-core">
  <metal:content-core define-macro="content-core">

  <metal:observation define-macro="observation-info">
    <div class="esdDiv">
      <div class="row">
        <div class="cell position-0 width-4 label">Ref. Number</div>
        <div class="cell position-4 width-13 label">Observation</div>
      </div>
      <div class="row">
        <div class="cell position-0 width-4 value" tal:content="context/id">UK-WAS-13-001</div>
        <div class="cell position-4 width-13 value" tal:content="context/title">Title</div>
      </div>
      <div class="row">
        <div class="cell position-4 width-2 label">Country</div>
        <div class="cell position-6 width-2 label">Sector</div>
        <div class="cell position-8 width-2 label">Gas</div>
        <div class="cell position-10 width-3 label">Year of emission</div>
      </div>
      <div class="row">
        <div class="cell position-4 width-2" tal:content="context/country_value">Country</div>
        <div class="cell position-6 width-2" tal:content="context/ghg_source_sectors_value">Sector</div>
        <div class="cell position-8 width-2" tal:content="context/crf_code_value">Gas</div>
        <div class="cell position-10 width-3" tal:content="context/year">Year of emission</div>
      </div>
    </div>
    <div class="esdDiv">
      <div class="row">
        <div class="cell position-0 width-7 label">
          Public Electricity and Heat Production (Gg CO<sub>2</sub> eq)
        </div>
        <div class="cell position-7 width-2 label" style="text-align:center">
          CO<sub>2</sub>
        </div>
        <div class="cell position-9 width-1 label" style="text-align:center">
          CH<sub>4</sub>
        </div>
        <div class="cell position-10 width-1 label" style="text-align:center">
          N<sub>2</sub>O
        </div>
        <div class="cell position-11 width-1 label" style="text-align:center">
          NO<sub>x</sub>
        </div>
        <div class="cell position-12 width-1 label" style="text-align:center">
          CO
        </div>
        <div class="cell position-13 width-1 label" style="text-align:center">
          NMVOC
        </div>
        <div class="cell position-14 width-1 label" style="text-align:center">
          SO<sub>2</sub>
        </div>
      </div>
      <div class="row" tal:repeat="row context/ghg_estimations">
        <div class="cell position-0 width-7 label"
            tal:content="row/line_title">
          Original estimate
        </div>
        <div class="cell position-7 width-2" style="text-align:center"
            tal:content="row/co2">
          10.492,24
        </div>
        <div class="cell position-9 width-1" style="text-align:center"
            tal:content="row/ch4">
          0,41
        </div>
        <div class="cell position-10 width-1" style="text-align:center"
            tal:content="row/n2o">
          0,36
        </div>
        <div class="cell position-11 width-1" style="text-align:center"
            tal:content="row/nox">
          11,36
        </div>
        <div class="cell position-12 width-1" style="text-align:center"
            tal:content="row/co">
          5,32
        </div>
        <div class="cell position-13 width-1" style="text-align:center"
            tal:content="row/nmvoc">
          0,95
        </div>
        <div class="cell position-14 width-1" style="text-align:center"
            tal:content="row/so2">
          2,96
        </div>
      </div>
    </div>
  </metal:observation>

  <div id="actions" tal:define="actions view/get_menu_actions">
    <h2>
      Actions
    </h2>
    <ul>
      <li tal:repeat="action actions">
        <a href=""
          tal:attributes="href action/action"
          tal:content="action/title">
          Action
        </a>
      </li>
    </ul>

  </div>

    <ul class="eea-tabs">
      <li>About this question</li>
      <li>Question chat room</li>
      <li tal:condition="view/isManager">Technical corrections</li>
    </ul>
    <div class="eea-tabs-panels">
      <div class="eea-tabs-panel">
        <div class="row">
          <div class="cell position-0 width-8 label">GHG source category</div>
          <div class="cell position-8 width-4 label">CRF code</div>
          <div class="cell position-12 width-4 label">Parameter</div>
        </div>
        <div class="row">
          <div class="cell position-0 width-8" tal:content="context/ghg_source_category_value">GHG source category</div>
          <div class="cell position-8 width-4" tal:content="context/crf_code_value">CRF code</div>
          <div class="cell position-12 width-4">Parameter</div>
        </div>
        <div class="row">
          <div class="cell position-0 width-4 label">Year</div>
          <div class="cell position-4 width-4 label">Key category</div>
          <div class="cell position-8 width-4 label">Status flag</div>
          <div class="cell position-12 width-4 label">Last update</div>
        </div>
        <div class="row" tal:define="toLocalizedTime nocall:here/@@plone/toLocalizedTime">
          <div class="cell position-0 width-4" tal:content="context/year">Year</div>
          <div class="cell position-4 width-4" tal:content="context/ghg_source_sectors_value">Key category</div>
          <div class="cell position-8 width-4" tal:content="python:', '.join(context.status_flag_value())">Status flag</div>
          <div class="cell position-12 width-4" tal:content="python:toLocalizedTime(context.ModificationDate())">Last update</div>
        </div>
      </div>
      <div class="eea-tabs-panel questions">
        <tal:question repeat="question_item view/get_questions">
          <div class="question"
              tal:define="question question_item/getObject;
                          first_comment question/getFirstComment;
                          cropText nocall:view/@@plone/cropText;
                        "
              >
            <tal:comment condition="nocall:question">
              <h2>
                <a href=""
                  tal:attributes="href first_comment/absolute_url"
                  tal:content="first_comment/@@text-transform/text/text/plain">
                  Text of the comment
                </a>
              </h2>
              <p class="txt"
                tal:content="first_comment/@@text-transform/text/text/plain">
                Text of the question

              </p>
            </tal:comment>
          </div>
        </tal:question>
      </div>
      <div class="eea-tabs-panel" tal:condition="view/isManager"
        tal:content="structure context/technical_corrections">
        Content for third tab
      </div>
    </div>
  </metal:content-core>
</metal:main>

</body>
</html>

